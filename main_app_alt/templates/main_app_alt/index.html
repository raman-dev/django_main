<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    {% load static %}
    <!-- <link href="{% static 'main_app_alt/css/twoutput.css' %}" rel="stylesheet"> -->
    <!-- <link href="{% static 'main_app_alt/css/reset.css' %}" rel="stylesheet"> -->
    <!-- Required meta tags -->


    <!-- Bootstrap CSS -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> -->
    
    <link href="{% static 'main_app_alt/bootstrap/css/bootstrap.css' %}" rel="stylesheet">
    <link href="{% static 'main_app_alt/css/styles.css' %}" rel="stylesheet">
    <title>raman.dev</title>
</head>

<body>
    <!--
        outline what do i want   
        i want scrolling along all my projects
        so i want a links on the left side
        that can be clicked to scroll to the correct page i want
        also i want as i scroll for the links to be highlighted
    -->
    
    <!-- navbar-->
    <nav class="navbar fixed-top navbar-expand-md navbar-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">raman.dev</a>
            <!-- collapse nav toggle -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!--links container-->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active active-underline" aria-current="page" href="#page-0">Netflix Clone
                            <div class="link-underline"></div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#page-1">Snapchat Clone<div class="link-underline"></div></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#page-2">Focus Timer<div class="link-underline"></div>
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            more projects
                        </a>
                        <ul class="dropdown-menu dropdown-menu" aria-labelledby="navbarDarkDropdownMenuLink">
                            <li><a class="dropdown-item" href="/wordle">react-wordle</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="https://github.com/raman-dev/CannyEdgeDetector-Complete">canny edge detector</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="https://github.com/raman-dev/conways-game-of-life">conway's game of life</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- content container-->
    <div class="content-container">
        <div class="content mx-auto border">
            <!--
                fixed height full width container?
            -->
            <div class="project-page page-0 flex" id="page-0">
                <div class="background-graphic"></div>
                <div class="info-column">
                    <div class="hidden-content-container">
                        <h1 class="whitespace-nowrap hidden-bottom">
                            Netflix Clone
                        </h1>
                    </div>
    
                    <div class="info-container">
                        <div class="p-2 summary-container">
                            <div class="hidden-content-container">
                                <h3 class="hidden-bottom">About</h3> 
                            </div>
                            
                            <p class="ps-2 summary">
                                consectetur adipiscing elit
                                Nunc luctus diam id felis mollis pretium
                                Fusce pretium luctus posuere. 
                                In non consectetur dui, nec molestie nulla
                            </p>
                        </div>
                        <div class="p-2 stack-container">
                            <div class="hidden-content-container">
                                <h3 class="hidden-bottom">Built With</h3>
                            </div> 
                            <ul class="stack-list">
                                <li class="">django</li>
                                <li class="">dashjs</li>
                                <li class="">bootstrap 5</li>
                            </ul>
                        </div>
                        <div id="page-0-source-link-container" class="source-link-container ">
                            <a class="p-1 px-4 project-link" href="/notflix/">
                                visit
                            </a>
                            <a class="p-1 px-4 project-link" href="https://github.com/raman-dev/django_main/tree/master/notflix">
                                source
                            </a>
                        </div>
                    </div>
                </div>
                <div class="graphic-column">
                    <div class="row-container flex">
                        <div class="img-col">
                            <div class="img-card">
                                <img class="page-0-img" data-src="{% static 'main_app_alt/images/netflix_clone/screenshot_2.png'  %}">
                            </div>
                        </div>
                        <div class="img-col">
                            <div class="img-card">
                                <img class="page-0-img" data-src="{% static 'main_app_alt/images/netflix_clone/screenshot_1.png'  %}">
                            </div>
                        </div>
                        <div class="img-col">
                            <div class="img-card">
                                <img class="page-0-img" data-src="{% static 'main_app_alt/images/netflix_clone/screenshot_3.png'  %}">
                            </div>
                        </div>
                        
                    </div>
                </div>
                
            </div>
    
            <div class="project-page page-1 container-fluid" id="page-1">
                <div class="background-graphic">
                </div> 
                <div class="text-end info-column">
                    <div class="hidden-content-container">
                        <h1 class="whitespace-nowrap hidden-bottom">Snapchat Clone</h1>
                    </div>
                       <div class="info-container ">
                        <div class="p-2 summary-container">
                            <div class="hidden-content-container">
                                <h3 class="hidden-bottom">About</h3>
                            </div> 
                            <p class="ps-2 summary">
                                consectetur adipiscing elit
                                Nunc luctus diam id felis mollis pretium
                                Fusce pretium luctus posuere. 
                                In non consectetur dui, nec molestie nulla
                            </p>
                        </div>
                        <div class="p-2 stack-container">
                            <div class="hidden-content-container">
                                <h3 class="hidden-bottom">Built With</h3>
                            </div> 
                            <ul class="stack-list">
                                <li class="">AWS Amplify<br>Cognito</li>
                                <li class="">Android SDK</li>
                                <li class="">GraphQL</li>
                            </ul>
                        </div>
                        <div id="page-1-src-link-container" class="source-link-container">
                            <a class="p-1 px-4 project-link" href="https://github.com/raman-dev/SnapChatCloneX">
                                source
                            </a>
                        </div>
                    </div>
                </div>  
                <div class="graphic-column">
                    
                    <!-- <canvas></canvas> -->
                    <div class="row-container flex align-items-end">
                        <div class="card-col">
                            <div class="img-card mb-4">
                                <img class="page-1-img"  data-src="{% static 'main_app_alt/images/snapchat_clone/login.svg' %}">
                            </div>
                            <div class="img-card">
                                <img class="page-1-img"  data-src="{% static 'main_app_alt/images/snapchat_clone/chat.svg' %}">
                            </div>
                        </div>
                        <div class="card-col">
                            <div class="img-card mb-4">
                                <img class="page-1-img" data-src="{% static 'main_app_alt/images/snapchat_clone/signup.svg' %}">
                            </div>
                            <div class="img-card">
                                <img class="page-1-img" data-src="{% static 'main_app_alt/images/snapchat_clone/search.svg' %}">
                            </div>
                        </div>
                        <div class="card-col">
                            <div class="img-card">
                                <img class="page-1-img" data-src="{% static 'main_app_alt/images/snapchat_clone/profile.svg' %}">
                            </div>
                        </div>
    
                    </div>
                </div>
                
            </div> 
    
            <div class="project-page page-2 container-fluid py-2" id="page-2">
                <canvas class="back-canvas"></canvas>
                <div class="info-column">
                    <div class="hidden-content-container">
                        <h1 class="whitespace-nowrap hidden-bottom">Focus Timer</h1>
                    </div>
                    <div class="info-container ">
                        <div class="p-2 summary-container">
                            <div class="hidden-content-container">
                                <h3 class="hidden-bottom">About</h3> 
                            </div>
                            <p class="ps-2 summary">
                                consectetur adipiscing elit
                                Nunc luctus diam id felis mollis pretium
                                Fusce pretium luctus posuere. 
                                In non consectetur dui, nec molestie nulla
                            </p>
                        </div>
                        <div class="p-2 stack-container">
                            <div class="hidden-content-container">
                                <h3 class="hidden-bottom">Built With</h3> 
                            </div>
                            <ul class="stack-list">
                                <li class="">Android SDK</li>
                                <li class="">Kotlin</li>
                            </ul>
                        </div>
                    </div>
                    <div id="page-2-source-link-container" class="source-link-container flex flex-inline">
                        <a class="p-1 px-4 project-link" href="#">
                            download
                        </a>
                        <a class="p-1 px-4 project-link" href="https://github.com/raman-dev/FocusTimerKT">
                            source
                        </a>
                    </div>
                </div>
                <div class="graphic-column">
                    <div class="img-card">
                        <img class="page-2-img" data-src="{% static 'main_app_alt/images/focus_timer.svg' %}"/>
                    </div>
                </div>
            </div>
    
        </div>
    </div>


    <!-- <script src="{% static 'main_app_alt/js/popper.min.js' %}"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js" integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous"></script>
    <script src="{% static 'main_app_alt/bootstrap/js/bootstrap.js' %}"></script>
    <script src="{% static 'main_app_alt/js/jquery-3.6.0.min.js' %}"></script>
    <script src="{% static 'main_app_alt/js/polygon.js' %}"></script>
    <script src="{% static 'main_app_alt/js/transitions.js' %}"></script>
    <script>
        //max width and height is parent
        //should redraw on resize obviously
        

        var projectImageMap = {'page-0-img':3,'page-1-img':5,'page-2-img':1};
        function loadProjectImages(){
            //load images for each project
            //add load event listener then
            //
            $('img').each( (i,x) => {
                //set src
                x.addEventListener('load',(event) => {
                    // console.log('img loaded!');
                    // console.log(event.target);
                    let page = event.target.classList[0];
                    let count = projectImageMap[page] - 1;
                    projectImageMap[page] = count;
                    if(count == 0){
                        //set opacity for all img for project
                        $('.'+page).each( (i,x) => {
                            $(x.parentElement).css({
                                'opacity':1
                            });
                        });
                    }
                });
                x.setAttribute('src',x.dataset.src);
                onCanvasResize();
            });
        }
        function onTextVisible(entries,observer){
            entries.forEach(entry => {
                if(entry.isIntersecting){
                    //console.log(entry.target);
                    entry.target.children[0].classList.add("show");
                }else{
                    entry.target.children[0].classList.remove("show");
                }
            });
        }

        let options = {
            root: null,
            rootMargin: "0px",
            threshold: 0.9
        }

        let textObserver = new IntersectionObserver(onTextVisible,options);

        function setPageTopMargins(){
            //set top margin of page 1
            //get top position
            let projectPages = $('.project-page');//
            //
            let prev = $(projectPages[0]);
            let prevTop = prev.offset().top;
            let prevScrollHeight = prev[0].scrollHeight;
            let prevMarginTop = parseInt(prev.css('margin-top'));
            let prevBottom = prevTop + prevScrollHeight;

            let numPages = projectPages.length;
            // console.log(`numPages => ${numPages}`);
            let i = 1;
            while(i < numPages){
                let current = $(projectPages[i]);
                let currentTop = current.offset().top;
                let currentMarginTop = parseInt(current.css('margin-top'));
                // let newMarginTop = currentMarginTop + (prevMarginTop + prevScrollHeight - currentTop + 108);
                // console.log(`page[${i - 1}].bottom => ${prevScrollHeight + prevTop}`);
                // console.log(`   before top[${i}] => ${currentTop}`);
                if(currentTop < prevTop + prevScrollHeight){
                    //
                    let newMarginTop = Math.min(256,currentMarginTop + (prevTop + prevScrollHeight) - currentTop + 108);
                    current.css({
                        'margin-top': newMarginTop+'px'
                    });
                }
                // console.log(`   after top[${i}] => ${current.offset().top}`);
                prev = current;
                prevTop = current.offset().top;
                prevScrollHeight = current[0].scrollHeight;
                prevBottom = prevTop + prevScrollHeight;
                // prevMarginTop = parseInt(current.css('margin-top'));

                i+=1;
            }
        }
        
        
        let heptagon = new Polygon(7,'#D3E4F5',1);
        //let pentagon = new Polygon(5,'#8CCDFF',0.8);

        function toggleDropDown(){
            //do what 
            let dropDownLinkContainer = $('.dropdown-link-container');
            if(dropDownLinkContainer.hasClass('open')){
                dropDownLinkContainer.css({
                    height:'0px',
                   'border-color': 'transparent',
                });
                dropDownLinkContainer.removeClass('open');
            }else{
                let totalDropDownHeight = 0;
                dropDownLinkContainer.children().each( (i,x) => {
                    totalDropDownHeight += x.clientHeight;
                });
                dropDownLinkContainer.css({
                    height: totalDropDownHeight + 'px',
                    'border-color': 'black',
                });
                dropDownLinkContainer.addClass('open');
            }
        }
        
        let polygons = [heptagon];
        $(document).ready( () => {

            $('body').on('click',(event)=>{
                if ($('.dropdown-link-container').hasClass('open')){
                    // $('.dropdown-link-container').removeClass('open');
                    toggleDropDown();
                }
            });

           $('.nav-item').on('click',(event)=>{
                let navItem = $(event.currentTarget);
                if (navItem.hasClass('dropdown')){
                    return;
                }
                event.preventDefault();
                $('.active').removeClass('active');
                
                navItem.children('.nav-link').addClass('active');

                //scrollIntoView
                let page = navItem.children('.nav-link').attr('href');
                document.querySelector('body').scrollTo(0,
                    document.querySelector(page).offsetTop - parseInt(document.querySelector('.content-container').style.marginTop) - 1
                );
           }); 

           $('.mdropdown').on('click',(event) => {
               event.preventDefault();
               toggleDropDown();
               event.stopPropagation();
           });

           $('.nav-item').on('mouseenter',(event)=>{
               //when any nav item is hovered remove the active underline from any current one
               $('.active-underline').removeClass('active-underline');
            //    console.log('enter nav-link');
           });
           $('.nav-item').on('mouseleave',(event)=>{
               $('.nav-item .active').addClass('active-underline');
            //    console.log('exit nav-link');
           });
           $('.navbar-toggler').on('click',(event)=>{
                //add shadow if not already there
                let navbarShadowElement = $('.navbar .container-fluid');
                if($(event.currentTarget).attr('aria-expanded')=="true"){
                    if (!navbarShadowElement.hasClass('navbar-shadow')){
                        navbarShadowElement.addClass('navbar-shadow');
                    }
                }else{
                    //check if we are scrolled all the way to the top
                    if (document.querySelector('body').scrollTop <= 0){
                        navbarShadowElement.removeClass('navbar-shadow');
                    }
                }
           });

           $('.hidden-content-container').each((i,x) => {
               textObserver.observe(x);
           });

           $('.content-container').css({
               'margin-top':$('nav div').innerHeight() + 'px'
           });

           loadProjectImages();
           
           //show page after content is loaded
           setPageTopMargins();//call once
           $(window).resize(setPageTopMargins);
           //set size of the canvas
           $(window).resize(onCanvasResize);
           $(document).on('scroll',(event) => {
               let body = document.querySelector('body');
            //    console.log(body.scrollTop);
                if(body.scrollTop <= 0){
                    if($('.navbar-toggler').attr('aria-expanded')=="false"){
                        $('.navbar .container-fluid').removeClass('navbar-shadow');
                    }
                }else{
                    let element = $('.navbar .container-fluid');
                    if(!element.hasClass('navbar-shadow')){
                        $('.navbar .container-fluid').addClass('navbar-shadow');
                    }
                }
           });
        });

        function onCanvasResize(){
            $('.content-container').css({
               'margin-top':($('nav div').innerHeight()+1) + 'px'
            });
            // Array.from(document.querySelectorAll('canvas')).forEach((canvas,i) => {
            let canvas = document.querySelector('canvas');
            let context = canvas.getContext('2d');
            let width = canvas.parentElement.clientWidth;
            let height = canvas.parentElement.clientHeight * 0.8;
            
            canvas.width = width;
            canvas.height = height;
            
            // console.log(`${width},${height}`);

            heptagon.stopAnimation();
            heptagon.setSize(width,height);
            heptagon.startAnimation(context,width,height);
            // });
        }
        
    </script>
</body>

</html>